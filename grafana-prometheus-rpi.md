# Monitoring a Raspberry Pi with Grafana

Monitoring your Raspberry Pi provides valuable insights into its performance and health, essential for ensuring the reliability and efficiency of your projects and services. This article will guide you through setting up a monitoring solution on your Raspberry Pi using Grafana, Prometheus, and Node Exporter. This setup allows you to visualize your Raspberry Pi's metrics through a user-friendly dashboard.

![Monitoring RPI with Grafana, Prometheus and Loki](https://github.com/demonoidvk/Vulnerability-Assessment-Reports/assets/18901770/4bb9b0ee-14e8-4915-a682-8ef42f08cf12)

## Prerequisites

Before starting, ensure you have the following:

- A Raspberry Pi set up with Raspberry Pi OS or another compatible Linux distribution.
- Access to the terminal or command line on the Raspberry Pi.
- Basic knowledge of using the Linux command line.

## Step 1: Install Node Exporter on Raspberry Pi

Node Exporter is a Prometheus exporter that collects system metrics.

1. Download and extract the latest version of Node Exporter for ARM:
```bash
wget https://github.com/prometheus/node_exporter/releases/download/v*/node_exporter-*.*-linux-armv7.tar.gz
tar -xvf node_exporter-*.*-linux-armv7.tar.gz
```
2. Move the Node Exporter binary to a suitable directory, such as `/usr/local/bin`:
```bash
sudo mv node_exporter-*/node_exporter /usr/local/bin/
```

## Step 2: Configure Node Exporter as a System Service

1. Create a systemd service file for Node Exporter:
```ini
[Unit]
Description=Node Exporter
Wants=network-online.target
After=network-online.target

[Service]
User=nobody
Group=nogroup
Type=simple
ExecStart=/usr/local/bin/node_exporter

[Install]
WantedBy=multi-user.target
```

2. Enable and start the Node Exporter service:
```bash
sudo systemctl enable node_exporter
sudo systemctl start node_exporter
```
## Step 3: Install Prometheus

1. Download and extract Prometheus for ARM:
```bash
wget https://github.com/prometheus/prometheus/releases/download/v*/prometheus-*.*-linux-armv7.tar.gz tar -xvf prometheus-*.*-linux-armv7.tar.gz`](<wget https://github.com/prometheus/prometheus/releases/download/v*/prometheus-*.*-linux-armv7.tar.gz
tar -xvf prometheus-*.*-linux-armv7.tar.gz>)
```
2. Move the Prometheus binaries and configuration files to appropriate directories:
```bash
sudo mv prometheus-*/prometheus /usr/local/bin/
sudo mv prometheus-*/promtool /usr/local/bin/
sudo mkdir /etc/prometheus
sudo mkdir /var/lib/prometheus
sudo mv prometheus-*/prometheus.yml /etc/prometheus/
sudo mv prometheus-*/consoles /etc/prometheus/
sudo mv prometheus-*/console_libraries /etc/prometheus/
sudo chown -R prometheus:prometheus /etc/prometheus /var/lib/prometheus
```

## Step 4: Configure Node_exporter to be used by prometheus

- Navigate to the Prometheus directory and edit the `prometheus.yml` configuration file to add your Node Exporter as a target.
- Under the `scrape_configs` section, add your Node Exporter:
```yml
scrape_configs:
  - job_name: 'node_exporter'
    static_configs:
      - targets: ['localhost:9100']
```
## Step 5: Configure Prometheus as a System Service

1. Create a systemd service file for Prometheus:
```ini
[Unit]
Description=Prometheus
Wants=network-online.target
After=network-online.target

[Service]
User=prometheus
Group=prometheus
Type=simple
ExecStart=/usr/local/bin/prometheus \
    --config.file=/etc/prometheus/prometheus.yml \
    --storage.tsdb.path=/var/lib/prometheus/ \
    --web.listen-address=:9090

[Install]
WantedBy=multi-user.target
```
2. Enable and start the Prometheus service:
```bash
sudo systemctl enable prometheus
sudo systemctl start prometheus
```
## Step 5: Install and Configure Grafana

1. Install Grafana (refer to the official Grafana documentation for the latest installation steps specific to Raspberry Pi).
    
2. Start and enable the Grafana server:
```bash
sudo systemctl enable grafana-server
sudo systemctl start grafana-server
```
## Step 6: Add Prometheus as a Data Source in Grafana

1. Access the Grafana web interface by navigating to `http://<raspberry-pi-ip>:3000`.
2. Add Prometheus as a data source through the Grafana UI, setting the URL to `http://localhost:9090`.
## Step 7: Create Dashboards in Grafana

- Import pre-configured dashboards or create custom ones to visualize the metrics collected by Prometheus and Node Exporter.

By following these steps, you'll have a comprehensive monitoring setup for your Raspberry Pi, allowing you to visualize system metrics through Grafana dashboards. This setup is invaluable for maintaining the health and performance of your Raspberry Pi projects.
